#!/bin/bash

# Slidev Setup Script
# This script initializes a new Slidev project for the AI agent to use

set -e  # Exit on error

PROJECT_ROOT="/Users/petereijgermans/Desktop/mcp-tutorial-java-magazine"
SLIDES_DIR="$PROJECT_ROOT/my-slides"

echo "ğŸš€ Initializing Slidev project..."

# 1. Initialize a new Slidev project (non-interactive)
# We use 'npx' to create the project in a folder named 'my-slides'
if [ ! -d "$SLIDES_DIR" ]; then
    echo "ğŸ“¦ Creating new Slidev project..."
    cd "$PROJECT_ROOT"
    npx create-slidev@latest my-slides --yes
    
    # Move into the project directory
    cd "$SLIDES_DIR"
else
    echo "ğŸ“ Slidev project already exists, updating..."
    cd "$SLIDES_DIR"
fi

# 2. Create a placeholder slides.md if it doesn't exist
# This is where your AI agent will write its content later
if [ ! -f slides.md ]; then
    echo "ğŸ“ Creating initial slides.md..."
    cat <<'EOF' > slides.md
---
theme: seriph
background: https://source.unsplash.com/collection/94734566/1920x1080
class: text-center
highlighter: shiki
info: |
  ## Slidev Tutorial
  Generated by AI Agent
---

# Welcome to Slidev
The AI Agent will update these slides shortly.

---

# Preparation
The environment is ready for the Firecrawl + Slidev flow.
EOF
else
    echo "âœ… slides.md already exists"
fi

# 3. Install dependencies if needed
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ Installing dependencies..."
    npm install
fi

echo ""
echo "âœ… Setup complete!"
echo "ğŸ“ Slides location: $SLIDES_DIR/slides.md"
echo "ğŸ’¡ To start the live preview, run: cd $SLIDES_DIR && npm run dev"
echo "ğŸŒ The slides will be available at: http://localhost:3030"


